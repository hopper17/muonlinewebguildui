<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora MU — REV3NGE</title>
  <meta name="description" content="Calculadora de tiempo para subir nivel en MU Online – Guild REV3NGE." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ===== HEADER (igual al index) ===== -->
  <header>
    <div class="container nav">
      <div class="brand">
        <img class="logo" src="assets/logoguild.png" alt="Guild REV3NGE" loading="lazy" />
        <h1>GUILD REV3NGE</h1>
      </div>

      <nav class="menu" aria-label="Main navigation">
        <a href="index.html">Inicio</a>
        <div class="dropdown">
          <button type="button" aria-haspopup="true" aria-expanded="true">Mu GP
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <div class="dropdown-menu" role="menu" style="display:block">
            <a href="clases.html">Clases</a>
            <a href="ranking.html">Top Kill</a>
            <a href="noticias.html">Noticias</a>
            <a class="active" href="calculadora.html">Calculadora EXP</a>
          </div>
        </div>
      </nav>

      <button class="burger" id="openMobile" aria-label="Abrir menú">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>
  </header>

  <!-- ===== MAIN (estilo y grid del index) ===== -->
  <main class="section">
    <div class="container hero-grid" style="align-items:flex-start">
      <section style="display:grid; gap:14px">
        <span class="badge">Herramientas • Calculadora de EXP</span>
        <h2 class="title">Calculadora de <span style="background:linear-gradient(90deg,var(--brand-1),var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent">Experiencia</span></h2>
        <p class="subtitle" style="max-width:70ch">
          Ingresa tu <strong>level actual</strong>, el <strong>% de progreso</strong> (Ctrl+F en el juego), tu <strong>EXP por segundo</strong> y el tiempo objetivo.
          <br>El resultado te dirá a qué <strong>nivel</strong> llegarás.
          <span id="dataState" class="badge" style="margin-left:8px;">Cargando datos…</span>
        </p>

        <!-- Card del formulario (mantiene IDs y funcionalidad) -->
        <div class="panel" style="padding:20px; display:grid; gap:14px">
          <h3 class="title" style="font-size:22px">Datos de cálculo</h3>

          <form id="form" style="display:grid; grid-template-columns:repeat(12,1fr); gap:14px">
            <label class="panel" style="grid-column:span 6; padding:12px">
              <span class="muted">1 - Level Actual</span>
              <input id="level" class="input" type="number" min="1" max="1700" placeholder="1–1700" required>
            </label>

            <label class="panel" style="grid-column:span 6; padding:12px">
              <span class="muted">2 - % de progreso de Level <span class="muted" style="opacity:.8">(Valor de Ctrl+F)</span></span>
              <input id="progreso" class="input" type="number" min="0" max="100" placeholder="0–100" required>
            </label>

            <label class="panel" style="grid-column:span 12; padding:12px">
              <span class="muted">3 - Experiencia por segundo</span>
              <input id="exp" class="input" type="number" min="0" step="1" placeholder="p. ej. 6000000" required>
            </label>

            <label class="panel" style="grid-column:span 4; padding:12px">
              <span class="muted">4 - Días</span>
              <input id="dias" class="input" type="number" min="0" max="30" placeholder="0–30">
            </label>
            <label class="panel" style="grid-column:span 4; padding:12px">
              <span class="muted">5 - Horas</span>
              <input id="horas" class="input" type="number" min="0" max="23" placeholder="0–23">
            </label>
            <label class="panel" style="grid-column:span 4; padding:12px">
              <span class="muted">6 - Minutos</span>
              <input id="minutos" class="input" type="number" min="0" max="60" placeholder="0–60">
            </label>

            <div style="grid-column:1/-1; display:flex; align-items:center; gap:12px">
              <button id="btn" type="submit" class="btn" disabled>Calcular</button>
              <span id="estado" class="muted"></span>
            </div>
          </form>

          <!-- Resultado (tu JS escribe aquí) -->
          <div id="resultado" class="panel" role="status" aria-live="polite" style="display:none; padding:16px">
            <strong class="muted">Resultado</strong>
            <div id="resultadoLevel" class="title" style="font-size:40px; margin-top:6px">—</div>
          </div>
        </div>
      </section>

      <!-- Arte/lateral como en el index -->
      <aside class="art" aria-hidden="true">
        <img src="assets/logoguild.png" alt="Logo REV3NGE" class="hero-logo" />
      </aside>
    </div>
  </main>

  <!-- ===== FOOTER (igual al index) ===== -->
  <footer>
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px">
      <div>
        <strong>GUILD REV3NGE</strong>
        <div class="muted">© 2025 – Powered by Hopper</div>
      </div>
      <div class="links">
        <a href="#terminos">Términos</a>
        <a href="#privacidad">Privacidad</a>
        <a href="#soporte">Soporte</a>
      </div>
    </div>
  </footer>

  <!-- ===== SCRIPTS (mismo orden de tu calculadora actual) ===== -->
  <script src="data_exp.js"></script>
  <script src="calculadora.js"></script>

  <!-- Pequeños ganchos visuales (no cambian tu lógica) -->
  <script>
    // Marca “datos listos” y habilita botón cuando existan NEED/TOTAL
    (function watchData(){
      const badge = document.getElementById('dataState');
      const btn   = document.getElementById('btn');

      if (window.NEED && window.TOTAL){
        if (btn) btn.removeAttribute('disabled');
        if (badge){
          badge.classList.add('ready');
          let dot = badge.querySelector('.dot');
          if (!dot){ dot = document.createElement('span'); dot.className='dot'; badge.prepend(dot); }
          dot.style.background='var(--ok)';
          dot.style.boxShadow='0 0 0 3px rgba(52,211,153,.15)';
          [...badge.childNodes].forEach(n=>{ if(n.nodeType===3) badge.removeChild(n); });
          badge.appendChild(document.createTextNode(' Datos listos'));
        }
        return;
      }
      setTimeout(watchData, 120);
    })();

    // Refleja el número grande cuando tu JS escriba en #resultado
    (function mountResultObserver(){
      const box = document.getElementById('resultado');
      const big = document.getElementById('resultadoLevel');
      const obs = new MutationObserver(()=>{
        const txt = box.textContent.trim();
        if (!txt) return;
        box.style.display='block';
        const m = txt.match(/level\s+(\d+)/i);
        big.textContent = m ? m[1] : '—';
      });
      obs.observe(document.getElementById('resultado'), {childList:true,subtree:true,characterData:true});
    })();
  </script>
</body>
</html>
